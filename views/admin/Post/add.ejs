<% include ../partials/header %>
    <div class="content-header row d-xl-block d-lg-block d-md-none d-sm-none d-none">
        <div class="content-header-left col-md-9 col-12 mb-2">
            <div class="row breadcrumbs-top">
                <div class="col-12">
                    <h3 class="content-header-title float-left mb-0">Add Post</h3>
                    <div class="breadcrumb-wrapper col-12">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="/admin">Home</a></li>
                            <li class="breadcrumb-item active">Add Post</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="content-body">
        <% include ../partials/flash %>
            <form id="post-form" enctype="multipart/form-data">
                <!-- Input Group for Post -->
                <div class="input-group">
                    <!-- Text Input -->
                    <textarea name="content" id="post-content" class="form-control" rows="3"
                        placeholder="What's on your mind?" required></textarea>
                    <!-- Media Button -->
                    <div class="ml-3">
                        <div>
                        <label for="file-upload" class="media-btn">
                            <img src="https://static.xx.fbcdn.net/rsrc.php/v4/y7/r/Ivw7nhRtXyo.png" alt="Media Icon">
                            <!-- Facebook Media Icon -->
                            Photo/Video
                        </label>
                        <input type="file" id="file-upload" name="file" class="d-none" multiple
                            accept="image/*,video/*"></div>
                            <div>
                                <button class="border-none" style="border:none; background:transparent" type="button" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
                                    <img src="	https://static.xx.fbcdn.net/rsrc.php/v4/yq/r/b37mHA1PjfK.png" alt="Media Icon">
                                    <!-- Facebook Media Icon -->
                                    Tag
                                </button>
                            </div>
                            <!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="staticBackdropLabel">Tag People</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="background:transparent; border:none">
            <i class="fa-solid fa-x" style="color: #ffffff;"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="tag_people">
            <div class="search">
                <input type="search" placeholder="Search"> <span class="done">Done</span>
                <div class="nav--pills">
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item" role="presentation">
                          <a class="nav-link active" id="admin-tab" data-bs-toggle="tab" href="#admin" role="tab" aria-controls="admin" aria-selected="true">Admin</a>
                        </li>
                        <li class="nav-item" role="presentation">
                          <a class="nav-link" id="company-tab" data-bs-toggle="tab" href="#company" role="tab" aria-controls="company" aria-selected="false">Company</a>
                        </li>
                        <li class="nav-item" role="presentation">
                          <a class="nav-link" id="institute-tab" data-bs-toggle="tab" href="#institute" role="tab" aria-controls="institute" aria-selected="false">Institute</a>
                        </li>
                        <li class="nav-item" role="presentation">
                          <a class="nav-link" id="student-tab" data-bs-toggle="tab" href="#student" role="tab" aria-controls="student" aria-selected="false">Student</a>
                        </li>
                      </ul>
                      
                      <!-- Tab Content -->
                      <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade show active" id="admin" role="tabpanel" aria-labelledby="admin-tab">
                          <!-- Admin content goes here -->
                          Content for Admin
                        </div>
                        <div class="tab-pane fade" id="company" role="tabpanel" aria-labelledby="company-tab">
                          <!-- Company content goes here -->
                          Content for Company
                        </div>
                        <div class="tab-pane fade" id="institute" role="tabpanel" aria-labelledby="institute-tab">
                          <!-- Institute content goes here -->
                          Content for Institute
                        </div>
                        <div class="tab-pane fade" id="student" role="tabpanel" aria-labelledby="student-tab">
                          <!-- Student content goes here -->
                          Content for Student
                        </div>
                      </div>
                </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Understood</button>
        </div>
      </div>
    </div>
  </div>

                           
                    </div>
                    
                </div>
                <!-- Submit Button -->
                <button type="submit" class="btn btn-primary mt-3">Post</button>
            </form>


    </div>

    <style>
        .search input{
            border: 1px solid #ccc;
    border-radius: 15px;
    font-size: 16px;
    padding: 3px 10px;
    width: 60%;

        }
        .done{
            color: #FC2B5A;
            padding-left: 10px;
        }
        .nav--pills{
            display: flex;
    gap: 5px;
    align-items: center;
    justify-content: space-evenly;
    padding-block: 15px;
    flex-direction: column;
        }
        .nav--pills > div{
            background: #FC2B5A;
        }
        .nav--pills .nav.nav-tabs .nav-item .nav-link {
            position: relative;
    border-top: 1px solid transparent; 
    border-left: 1px solid transparent;
    border-right: 1px solid transparent;
    border-bottom: none; 
    transition: all 0.3s ease;
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
}

.nav--pills .nav.nav-tabs .nav-item .nav-link.active {
    position: relative;
  border-top: 1px solid transparent; 
  border-left: 1px solid transparent;
  border-right: 1px solid transparent;
  border-image: linear-gradient(30deg, #FC2B5A, rgba(115, 103, 240, 0.5)) 1 !important;
  border-bottom: none;
  background: none; 
  transition: all 0.3s ease;
  border-top-left-radius: 10px;
  border-top-right-radius: 10px;
}

.nav--pills .nav.nav-tabs .nav-item .nav-link.active:after {
  content: ""; /* Remove bottom gradient */
  display: none;
}
.tab-pane {
  transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
}

.tab-pane:not(.active) {
  opacity: 0;
  transform: scale(0.95); /* Slight zoom-out effect when hidden */
}

.tab-pane.active {
  opacity: 1;
  transform: scale(1); /* Reset zoom to normal for the active tab */
}
    </style>
    <script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script>




    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <!-- <script src="https://cdn.ckeditor.com/ckeditor5/37.0.0/classic/ckeditor.js"></script> -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        $(document).ready(function () {
            // Handle form submission
            $("#post-form").on("submit", function (e) {
                e.preventDefault(); // Prevent the default form submission


                const formData = new FormData();
                formData.append("content", $("#post-content").val());
                const files = $("#file-upload")[0].files;
                console.log("Content:", $("#post-content").val());
                console.log("Files:", files);
                for (let i = 0; i < files.length; i++) {
                    formData.append("files", files[i]);
                    console.log(`File ${i + 1}:`, files[i].name);
                }

                // Show a loading spinner or disable the submit button (optional)
                $("button[type=submit]").text("Posting...").attr("disabled", true);

                // Send data to the API
                $.ajax({
                    url: "/api/postfiles", // API endpoint
                    type: "POST",
                    data: formData,
                    processData: false,
                    contentType: false,
                    success: function (response) {
                        // Handle successful response
                        console.log("Response:", response);
                        alert("Post created successfully!");
                        // Optionally clear the form
                        $("#post-form")[0].reset();
                        $("button[type=submit]").text("Post").attr("disabled", false);
                    },
                    error: function (xhr, status, error) {
                        // Handle error response
                        console.error("Error:", error);
                        alert("Failed to create post. Please try again.");
                        $("button[type=submit]").text("Post").attr("disabled", false);
                    },
                });
            });
        });
    </script>


    <% include ../partials/footer %>
        </div>