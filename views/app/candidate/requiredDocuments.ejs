<% include ../../partials/header %>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.2.0/css/swiper.min.css">
    <link rel="stylesheet" type="text/css" href="/public_assets/css/card-slider.css">
    <link rel="stylesheet" type="text/css" href="/public_assets/css/slider-responsive.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@2.1.99/css/materialdesignicons.min.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.2.0/css/swiper.min.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/css/slider-viewJob.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">

    <body class="vertical-layout vertical-menu-modern 2-columns  navbar-floating footer-static" data-open="click"
        data-menu="vertical-menu-modern" data-col="2-columns" id="inner_job_page">

        <% include ./partials/navbar%>
            <% include ./partials/leftpane%>
                <% include ../../partials/flash %>

                    <div class="app-content content basic-timeline">
                        <div class="content-overlay"></div>
                        <div class="header-navbar-shadow"></div>
                        <div class="content-wrapper">
                            <!-- <div class="content-header row"></div> -->
                            <div class="content-body  mb-4">

                                <div class="uploader-container">
                                    <div class="uploader-header">Document Uploader</div>

                                    <div id="documentContainer">
                                        <div class="doc-row">

                                            <div class="file-container d-flex align-items-center gap-4">
                                                <label class="field-label">Select File:</label>
                                                <label class="file-input-label">
                                                    Choose File
                                                    <input type="file" id="docPopUp" class="file-input fileInput"
                                                        accept=".pdf,.doc,.docx,.jpg,.jpeg,.png"
                                                        onchange="validateFile(this)">
                                                </label>
                                                <div id="image-preview"
                                                    style="display: flex; flex-wrap: wrap; gap: 10px;"></div>
                                                <div class="add-doc-container">
                                                    <button class="upload-btn"
                                                        onclick="uploadFile(this)">Upload</button>
                                                </div>
                                            </div>


                                        </div>
                                    </div>




                                </div>

                            </div>
                        </div>
                    </div>

                    <style>
                        .uploader-container {
                            background-color: #ffffff;
                            border-radius: 12px;
                            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
                            overflow: hidden;
                            margin: 20px auto;
                            max-width: 900px;
                        }
                    
                        .uploader-header {
                            /* background: linear-gradient(135deg, #3498db, #2c3e50); */
                            background: linear-gradient(135deg, #6b45a9, #e83a5f);
                            color: white;
                            padding: 20px;
                            text-align: center;
                            font-size: 24px;
                            font-weight: 600;
                        }
                    
                        .doc-row {
                            display: flex;
                            flex-wrap: wrap;
                            gap: 15px;
                            padding: 25px;
                            border-bottom: 1px solid #eaeaea;
                            background-color:  #f8f9fa;;
                            transition: all 0.3s ease;
                        }
                    
                        .doc-row:hover {
                            background-color: #f0f7ff;
                            transform: translateY(-2px);
                        }
                    
                        .field-label {
                            display: block;
                            margin-bottom: 8px;
                            color: #2c3e50;
                            font-weight: 600;
                            font-size: 14px;
                            white-space: nowrap;
                        }
                    
                        .file-container {
                            flex: 1 1 250px;
                            position: relative;
                            gap: 40px;
                        }
                    
                        .file-input-label {
                            display: block;
                            position: relative;
                            width: 100%;
                            height: 45px;
                            background-color: #f0f0f0;
                            border: 2px solid #e0e0e0;
                            border-radius: 6px;
                            text-align: center;
                            line-height: 45px;
                            cursor: pointer;
                            overflow: hidden;
                            color: #555;
                            font-weight: 500;
                            transition: all 0.3s;
                            margin: 0 !important;
                            transition: background-color 0.2s ease, border-color 0.2s ease, transform 0.1s ease;
                        }
                    
                        .file-input-label:hover {
                            background-color: #e8e8e8;
                            border-color: #d0d0d0;
                        }
                    
                        .file-input-label:active {
                            transform: scale(0.98);
                        }
                    
                        .file-input {
                            position: absolute;
                            top: 0;
                            left: 0;
                            width: 100%;
                            height: 100%;
                            opacity: 0;
                            cursor: pointer;
                        }
                    
                        .upload-btn {
                            /* background-color: #3498db; */
                            background:  linear-gradient(135deg, #6b45a9, #e83a5f);
                            color: white;
                            border: none;
                            border-radius: 6px;
                            padding: 12px 15px;
                            font-size: 14px;
                            font-weight: 600;
                            cursor: pointer;
                            transition: all 0.3s;
                            box-shadow: 0 3px 10px rgba(107, 69, 169, 0.3);
                            transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
                        }
                    
                        .upload-btn:hover {
                            /* background-color: #2980b9; */
                            background: linear-gradient(135deg, #5d3b93, #d62e50);
                            transform: translateY(-2px);
                            box-shadow: 0 5px 15px rgba(232, 58, 95, 0.4);
                        }
                    
                        .upload-btn:active {
                            transform: translateY(0);
                        }
                    
                        .add-doc-container {
                            display: flex;
                            align-items: center;
                        }
                    
                        #image-preview {
                            display: flex;
                            flex-wrap: wrap;
                            gap: 10px;
                            margin-top: 15px;
                            min-height: 60px;
                        }
                    
                        .preview-item {
                            position: relative;
                            display: inline-block;
                            margin-right: 10px;
                            margin-bottom: 10px;
                            transition: opacity 0.3s ease, transform 0.3s ease;
                        }
                    
                        .preview-item img, 
                        .preview-item video {
                            width: 80px;
                            height: 80px;
                            border-radius: 8px;
                            object-fit: cover;
                            border: 1px solid #ddd;
                            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
                            transition: transform 0.2s ease;
                        }
                    
                        .preview-item .preview-icon {
                            width: 80px;
                            height: 80px;
                            border-radius: 8px;
                            background-color: #f5f5f5;
                            border: 1px solid #ddd;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            color: #555;
                            font-weight: bold;
                            font-size: 12px;
                            text-align: center;
                            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
                            transition: transform 0.2s ease, box-shadow 0.2s ease;
                        }
                    
                        .remove-btn {
                            position: absolute;
                            top: -8px;
                            right: -8px;
                            background: #ff5252;
                            color: white;
                            border-radius: 50%;
                            width: 22px;
                            height: 22px;
                            font-size: 12px;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            cursor: pointer;
                            border: 2px solid white;
                            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
                            transition: all 0.2s;
                            transition: background-color 0.2s ease, transform 0.2s ease;
                        }
                    
                        .remove-btn:hover {
                            background: #ff0000;
                            transform: scale(1.1);
                        }
                    
                        .file-name {
                            font-size: 12px;
                            color: #555;
                            max-width: 80px;
                            overflow: hidden;
                            text-overflow: ellipsis;
                            white-space: nowrap;
                            text-align: center;
                            margin-top: 5px;
                        }
                    
                        @media (max-width: 768px) {
                            .doc-row {
                                flex-direction: column;
                            }
                    
                            .upload-btn {
                                width: 100%;
                                margin-top: 15px;
                            }
                        }
                    </style>
                   
                    <!-- JavaScript Code -->
                    <script>
                    let selectedFiles = [];
                    
                    function validateFile(input) {
                        const allowedExtensions = ["pdf", "doc", "docx", "jpg", "jpeg", "png"];
                        let validFiles = true;
                        
                        // Check each file for valid extension
                        Array.from(input.files).forEach(file => {
                            const fileExtension = file.name.split('.').pop().toLowerCase();
                            if (!allowedExtensions.includes(fileExtension)) {
                                validFiles = false;
                            }
                        });
                        
                        if (!validFiles) {
                            alert("Please upload only PDF, DOC, DOCX, JPG, JPEG, or PNG files!");
                            input.value = ""; // Clear input on invalid files
                            return;
                        }
                        
                        // Preview files
                        displayFilePreview(input.files);
                    }
                    
                    function displayFilePreview(files) {
                        let previewContainer = document.getElementById("image-preview");
                        previewContainer.innerHTML = ""; // Clear existing previews
                        
                        if (files && files.length > 0) {
                            selectedFiles = Array.from(files); // Store files for later use
                            
                            selectedFiles.forEach((file, index) => {
                                const previewItem = document.createElement("div");
                                previewItem.className = "preview-item";
                                previewItem.dataset.index = index;
                                
                                // Create appropriate preview based on file type
                                if (file.type.startsWith("image/")) {
                                    // Image preview
                                    let reader = new FileReader();
                                    reader.onload = function(e) {
                                        previewItem.innerHTML = `
                                            <img src="${e.target.result}" alt="${file.name}">
                                            <div class="remove-btn" onclick="removeFile(${index})">×</div>
                                            <div class="file-name">${truncateFilename(file.name)}</div>
                                        `;
                                    };
                                    reader.readAsDataURL(file);
                                } else if (file.type.startsWith("video/")) {
                                    // Video preview
                                    let reader = new FileReader();
                                    reader.onload = function(e) {
                                        previewItem.innerHTML = `
                                            <video src="${e.target.result}" controls></video>
                                            <div class="remove-btn" onclick="removeFile(${index})">×</div>
                                            <div class="file-name">${truncateFilename(file.name)}</div>
                                        `;
                                    };
                                    reader.readAsDataURL(file);
                                } else {
                                    // Generic file icon for PDFs, DOCs, etc.
                                    let fileIcon = getFileIcon(file.name);
                                    previewItem.innerHTML = `
                                        <div class="preview-icon">${fileIcon}</div>
                                        <div class="remove-btn" onclick="removeFile(${index})">×</div>
                                        <div class="file-name">${truncateFilename(file.name)}</div>
                                    `;
                                }
                                
                                previewContainer.appendChild(previewItem);
                            });
                        }
                    }
                    
                    function getFileIcon(filename) {
                        const extension = filename.split('.').pop().toLowerCase();
                        
                        switch(extension) {
                            case 'pdf':
                                return 'PDF';
                            case 'doc':
                            case 'docx':
                                return 'DOC';
                            default:
                                return 'FILE';
                        }
                    }
                    
                    function truncateFilename(filename) {
                        if (filename.length > 15) {
                            const extension = filename.split('.').pop();
                            const name = filename.substring(0, filename.length - extension.length - 1);
                            return name.substring(0, 10) + '...' + '.' + extension;
                        }
                        return filename;
                    }
                    
                    function removeFile(index) {
                        // Remove from selectedFiles array
                        selectedFiles.splice(index, 1);
                        
                        // If no files left, clear the input
                        if (selectedFiles.length === 0) {
                            document.getElementById("docPopUp").value = "";
                        }
                        
                        // Create a new FileList from the remaining files
                        const dt = new DataTransfer();
                        selectedFiles.forEach(file => dt.items.add(file));
                        
                        // Update the file input
                        document.getElementById("docPopUp").files = dt.files;
                        
                        // Refresh preview
                        displayFilePreview(dt.files);
                    }
                    
                    function uploadFile(button) {
                        if (selectedFiles.length === 0) {
                            alert("Please select files to upload first");
                            return;
                        }
                        
                        // Here you would typically implement your upload logic
                        // For demonstration, we'll just show a success message
                        alert(`${selectedFiles.length} file(s) uploaded successfully!`);
                        
                        // Clear form after successful upload
                        document.getElementById("docPopUp").value = "";
                        document.getElementById("image-preview").innerHTML = "";
                        selectedFiles = [];
                    }
                    </script>


    </body>