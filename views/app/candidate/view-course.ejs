<% include ../../partials/header %>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.2.0/css/swiper.min.css">
  <link rel="stylesheet" type="text/css" href="/public_assets/css/card-slider.css">
  <link rel="stylesheet" type="text/css" href="/public_assets/css/slider-responsive.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@2.1.99/css/materialdesignicons.min.css">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.2.0/css/swiper.min.css">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="/css/slider-viewJob.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">

  <style>
    label.review {
      display: block;
    }

    input.star {
      display: none;
    }

    label.star {
      float: right;
      padding: 10px;
      font-size: 30px !important;
      color: #444;
      transition: all .2s;
    }

    input.star:hover~label.star:before {
      content: '\f005';
      color: #ffd100;
      transition: all .25s;
    }

    input.star:checked~label.star:before {
      content: '\f005';
      color: #ffd100;
      transition: all .25s;
    }

    input.star-5:hover~label.star:before {
      color: #FE7;
      text-shadow: 0 0 20px #952;
    }

    input.star-5:checked~label.star:before {
      color: #FE7;
      text-shadow: 0 0 20px #952;
    }

    label.star:hover {
      transform: rotate(-15deg) scale(1.3);
    }

    label.star:before {
      content: '\f006';
      font-family: FontAwesome;
    }

    input.star:checked~.rev-box {
      height: 125px;
      overflow: visible;
    }
  </style>

  <body class="vertical-layout vertical-menu-modern 2-columns  navbar-floating footer-static" data-open="click"
    data-menu="vertical-menu-modern" data-col="2-columns" id="inner_job_page">

    <% include ./partials/navbar%>
      <% include ./partials/leftpane%>
        <% include ../../partials/flash %>
          <div class="app-content content">
            <div class="content-overlay"></div>
            <div class="header-navbar-shadow"></div>
            <div class="content-wrapper"></div>
            <section class="ml-3">
              <div class="container-fluid px-1">
                <div class="card">
                  <div class="card-body">
                    <div class="row">
                      <div class="col-lg-8 col-md-8 column">
                        <div class="course_dtl mt-2">
                          <div class="row">
                            <div class="col-md-12">
                              <div class="curs_description">
                                <h3 class="text-capitalize mb-2 font-weight-bold">
                                  <%=course.name%>
                                </h3>
                                <h4 class="job_cate">
                                  <%= course?.sectors ? course.sectors[0].name : "" %>
                                </h4>
                                <h6>Course Overview</h6>
                                <button onclick="showpopup()"> show popup</button>
                                <div class="row">
                                  <div class="col-md-4 col-lg-4 col-sm-6 col-6">
                                    <div class="course_spec">
                                      <div class="spe_icon">
                                        <i class="la la-money"></i>
                                      </div>
                                      <div class="spe_detail">
                                        <h3 class="jobDetails-wrap">
                                          <%=course.cutPrice ? course.cutPrice.toLowerCase()==='free' ? course.cutPrice
                                            : '₹ ' + course.cutPrice : 'N/A' %>
                                        </h3>
                                        <span class="text-capitalize jobDetails-wrap">Course Fee</span>
                                      </div>
                                    </div>
                                  </div>

                                  <div class="col-md-4 col-lg-4 col-sm-6 col-6">
                                    <div class="course_spec">
                                      <div class="spe_icon">
                                        <i class="la la-money"></i>
                                      </div>
                                      <div class="spe_detail">
                                        <h3 class="jobDetails-wrap">
                                          <%=course.courseLevel ? course.courseLevel : 'N/A' %>
                                        </h3>
                                        <span class="text-capitalize jobDetails-wrap">Course Level</span>
                                      </div>
                                    </div>
                                  </div>

                                  <div class="col-md-4 col-lg-4 col-sm-6 col-6">
                                    <div class="course_spec">
                                      <div class="spe_icon">
                                        <i class="la la-money"></i>
                                      </div>
                                      <div class="spe_detail">
                                        <h3 class="jobDetails-wrap">
                                          <%=course?.certifyingAgency ? course.certifyingAgency : 'N/A' %>
                                        </h3>
                                        <span class="text-capitalize jobDetails-wrap">Course Agency</span>
                                      </div>
                                    </div>
                                  </div>
                                </div>

                              </div>
                            </div>
                          </div>
                          <div class="row py-4">
                            <div
                              class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12 mb-xl-2 mb-lg-2 mb-md-2 mb-sm-4 mb-4">
                              <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                                <div class="carousel-indicators">
                                  <% if(course.photos?.length>0) { %>
                                    <%course.photos.forEach((photo, i)=>{%>
                                      <button type="button" data-target="#carouselExampleIndicators"
                                        data-slide-to="<%=i%>" class="active activeclass" aria-current="true"
                                        aria-label="Slide 1"></button>
                                      <%})%>
                                        <% } else { %>
                                          <button type="button" data-target="#carouselExampleIndicators"
                                            data-slide-to="0" aria-label="Slide 2" class="activeclass"></button>
                                          <% } %>
                                </div>
                                <div class="carousel-inner ">
                                  <% if(course.photos?.length>0) { %>
                                    <%course.photos.forEach((photo, i)=>{%>
                                      <div class="carousel-item <% if (i==0){%> active <% } %>">
                                        <img class="d-block w-100"
                                          src="<%=photo ? process.env.MIPIE_BUCKET_URL +'/' +photo : '/public_assets/images/newjoblisting/banner1.jpg'%>"
                                          class="d-block w-100 rounded shadow" alt="...">
                                      </div>
                                      <%})%>
                                        <% } else { %>
                                          <div class="carousel-item">
                                            <img src="/public_assets/images/newjoblistingbanner2.jpg"
                                              class="d-block w-100 rounded shadow" alt="...">
                                          </div>
                                          <% } %>
                                </div>
                                <% if(course.photos?.length>0) { %>
                                  <button class="carousel-control-prev" type="button"
                                    data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon pree" aria-hidden="true"></span>
                                    <span class="visually-hidden">Previous</span>
                                  </button>
                                  <button class="carousel-control-next" type="button"
                                    data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                                    <span class="carousel-control-next-icon pree" aria-hidden="true"></span>
                                    <span class="visually-hidden">Next</span>
                                  </button>
                                  <% } %>
                              </div>
                            </div>
                            <div class="col-md-6 d-xl-block d-lg-block d-md-block d-sm-none d-none">
                              <div class="v_pal mt-sm-3 mt-md-0 mt-3">
                                <% if (course.videos !==undefined && course.videos !==null) { %>
                                  <a href="#" data-target="#videoModal" data-toggle="modal"
                                    link="<%= process.env.MIPIE_BUCKET_URL +'/' + course.videos[0] %>"
                                    class="video-bttn position-relative d-block"><img id="videoPlay"
                                      src="<%= course.thumbnail ? process.env.MIPIE_BUCKET_URL +'/' + course.thumbnail : '/images/pages/video_thum1.png' %>"
                                      class="video_thum img-fluid" alt="">
                                    <img src="public_assets/images/newjoblisting/play.svg" alt="" class="group1"></a>
                                  <%}%>
                              </div>
                            </div>
                            <div class="col-md-6 d-xl-none d-lg-none d-md-none d-sm-block d-block">
                              <div class="v_pal">
                                <% if (course.videos !==undefined && course.videos !==null) { %>
                                  <a href="#" data-target="#videoModal" data-toggle="modal"
                                    link="<%= process.env.MIPIE_BUCKET_URL +'/' + course.videos[0] %>"
                                    class="video-bttn position-relative d-block"><img id="videoPlay"
                                      src="<%= course.thumbnail ? process.env.MIPIE_BUCKET_URL +'/' + course.thumbnail : '/images/pages/video_thum1.png' %>"
                                      class="video_thum img-fluid" alt="">
                                    <img src="public_assets/images/newjoblisting/play.svg" alt="" class="group1"></a>
                                  <%}%>
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="job-single-sec">
                          <div class="cr_detail_in cr_vw">
                            <h3 class="mt-xl-2 mt-lg-3 mt-md-3 mt-sm-2 mt-2 mb-xl-4 mb-lg-4 mb-sm-2 mb-2">Course Details
                            </h3>
                            <div class="row">
                              <div class="col-md-3 col-sm-6 col-6">
                                <div class="course_dt mb-4">
                                  <% if (course.age !==undefined && course.age !==null) { %>
                                    <h6>Age</h6>
                                    <p class="text-capitalize mb-0">
                                      <span>
                                        <%= course.age ? course.age : 'N/A' %> Years
                                      </span>
                                    </p>
                                    <% } %>
                                </div>
                              </div>

                              <div class="col-md-3 col-sm-6 col-6">
                                <div class="course_dt mb-4">
                                  <% if (course.qualification !==undefined && course.qualification !==null) { %>
                                    <h6>Course Qualification</h6>
                                    <p class="text-capitalize mb-0">
                                      <span>
                                        <%= course.qualification ? course.qualification : 'N/A' %>
                                      </span>
                                    </p>
                                    <% } %>
                                </div>
                              </div>

                              <div class="col-md-3 col-sm-6 col-6">
                                <div class="course_dt mb-3">
                                  <% if (course.duration !==undefined && course.duration !==null) { %>
                                    <h6>Course Duration</h6>
                                    <p class="text-capitalize mb-0">
                                      <span>
                                        <%= course.duration ? course.duration : 'N/A' %>
                                      </span>
                                    </p>
                                    <% } %>
                                </div>
                              </div>

                              <div class="col-md-3 col-sm-6 col-6">
                                <div class="course_dt mb-3">
                                  <% if (course.experience !==undefined && course.experience !==null) { %>
                                    <h6> Experience</h6>
                                    <p class="text-capitalize mb-0">
                                      <span>
                                        <%= course.experience ? course.experience : 'N/A' %>
                                      </span>
                                    </p>
                                    <% } %>
                                </div>
                              </div>
                              <% if (course.courseFeatures !==undefined && course.courseFeatures !==null &&
                                course.courseFeatures !=='' ) { %>
                                <div class="col-md-6">
                                  <div class="course_dt mb-4">
                                    <h6>Course feature</h6>
                                    <p class="text-capitalize mb-0">
                                    <ul class="contact-info text-start text-white pl-4">
                                      <%course.courseFeatures?.split('\n').forEach((feature, i)=>{%>
                                        <li>
                                          <%= feature%>
                                        </li>
                                        <% })%>
                                    </ul>
                                    </p>
                                  </div>
                                </div>
                                <% } %>
                                  <% if (course.importantTerms !==undefined && course.importantTerms !==null &&
                                    course.importantTerms !=='' ) { %>
                                    <div class="col-md-6">
                                      <div class="course_dt mb-4">
                                        <h6>Course terms</h6>
                                        <p class="text-capitalize mb-0">
                                        <ul class="contact-info text-start text-white pl-4">
                                          <%course.importantTerms?.split('\n').forEach((term, i)=>{%>
                                            <li>
                                              <%= term%>
                                            </li>
                                            <% })%>
                                        </ul>
                                        </p>
                                      </div>
                                    </div>
                                    <% } %>
                                      <% if (course.requiredDocuments !==undefined && course.requiredDocuments !==null
                                        && course.requiredDocuments !=='' ) { %>
                                        <div class="col-md-6">
                                          <div class="course_dt mb-4">
                                            <h6>Required Documents</h6>
                                            <p class="text-capitalize mb-0">
                                            <ul class="contact-info text-start text-white pl-4">
                                              <%course.requiredDocuments?.split('\n').forEach((term, i)=>{%>
                                                <li>
                                                  <%= term%>
                                                </li>
                                                <% })%>
                                            </ul>
                                            </p>
                                          </div>
                                        </div>
                                        <% } %>
                            </div>
                          </div>
                        </div>

                      </div>
                      <div class="col-lg-4 col-md-4 column mt-xl-2 mt-lg-3 mt-md-3 mt-sm-0 mt-0">
                        <a class="apply-thisjob  apply-div-field text-left px-0 d-xl-block d-lg-block d-md-block d-sm-none d-none py-4 mb-2 decoration-none "
                          href="tel:<%=course.counslerphonenumber%>" title="apply" style="text-decoration: none;"><i
                            class="la la-phone  plane-font ml-2"></i>Call Now</a>
                        <% if(!isApplied){ %>
                          <a class="apply-thisjob  apply-div-field text-left px-0 d-xl-block d-lg-block d-md-block d-sm-none d-none py-4 mb-2 decoration-none "
                            href="#" title="apply" style="text-decoration: none;" data-toggle="modal"
                            data-target="#apply" data-value="<%= isApplied %>" data-bs-target="#editUser"
                            data-bs-toggle="modal" id="apply-div-btn"><i class="la la-paper-plane ml-2"></i>Apply
                            Now</a>
                          <%} else if(course.registrationStatus !=='Paid' && Number(course.registrationCharges)> 0) {%>
                            <a class="apply-thisjob text-left px-0 py-3 d-xl-block d-lg-block d-md-block d-sm-none d-none"
                              href="#" onclick="payment('<%= course._id %>')" title=""><i
                                class="la la-paper-plane ml-3"></i>Complete Registration</a>

                            <% } else if(course.registrationStatus==='Paid' || Number(course.registrationCharges)==0) {
                              %>
                              <a class="apply-thisjob text-left px-0 py-3 d-xl-block d-lg-block d-md-block d-sm-none d-none disabled-button"
                                href="#" title=""><i class="la la-paper-plane ml-3"></i>Applied Course</a>
                              <%}%>

                                <div class="d-xl--none d-lg-none d-md-none d-sm-block d-block" id="floating-apply">
                                  <% if(!isApplied){ %>
                                    <a class="apply-thisjob  apply-div-field text-left px-0 py-2 mb-2 decoration-none shadow text-center"
                                      href="#" title="apply" style="text-decoration: none;" data-toggle="modal"
                                      data-target="#apply" data-value="<%= isApplied %>" data-bs-target="#editUser"
                                      data-bs-toggle="modal" id="apply-div-btn">APPLY NOW</a>
                                    <%} else if(course.registrationStatus !=='Paid' &&
                                      Number(course.registrationCharges)> 0) {%>
                                      <a class="apply-thisjob text-left px-0 py-3" href="#"
                                        onclick="payment('<%= course._id %>')" title=""><i
                                          class="la la-paper-plane ml-3"></i>Complete Registration</a>
                                      <% } else if(course.registrationStatus==='Paid' ||
                                        Number(course.registrationCharges)==0) { %>
                                        <a class="apply-thisjob text-left px-0 py-3 disabled-button" href="#"
                                          title=""><i class="la la-paper-plane ml-3"></i>Applied Course</a>
                                        <%}%>
                                          <a class="apply-thisjob text-center apply-div-field text-left px-0 py-2 mb-2 decoration-none shadow text-white"
                                            href="tel:<%=mobileNumber%>" id="apply-div-btn">CALL NOW</a>
                                </div>



                                <!-- Course Overview -->
                                <div class="extra-job-info mb-1 mt-3">
                                  <span class="text-capitalize px-0 py-1"><i class="la la-male"></i><strong>Training
                                      Mode</strong>
                                    <%= course.trainingMode ? course.trainingMode : 'No Preferances' %>
                                  </span>
                                  <span class="text-capitalize px-0 py-1"><i
                                      class="la la-briefcase"></i><strong>Registration Charges</strong>
                                    <%=course.registrationCharges?course.registrationCharges :'N/A'%> <b>
                                        <%=isApplied? ' ( ' + (course.registrationStatus || 'Unpaid' ) + ' )' : '' %>
                                      </b>
                                  </span>
                                  <span class="text-capitalize px-0 py-1"><i
                                      class="la la-money"></i><strong>Experience</strong>
                                    <%=course.experience? course.experience:'N/A'%>
                                  </span class="text-capitalize px-0 "><span class="py-2 px-0"><i
                                      class="la la-building"></i><strong>Stiepend During Training</strong>
                                    <%=course.stipendDuringTraining? course.stipendDuringTraining : 'N/A' %>
                                  </span class="text-capitalize px-0 py-1"><span class="py-2 px-0"><i
                                      class="la la-credit-card"></i><strong>Duration</strong>
                                    <%=course.duration ? course.duration : 'N/A' %>
                                  </span>
                                  <span class="px-0"><i class="la la-map "></i><strong>Last Date</strong>
                                    <%=moment(course.lastDateForApply ||
                                      course.createdAt).utcOffset('+05:30').format('DD MMM YYYY') %></i>
                                  </span>
                                  <span class="text-capitalize px-0 py-1"><i class="la la-rupee"></i><strong>EMI Options
                                      Available</strong>
                                    <%=course.emiOptionAvailable? course.emiOptionAvailable : 'N/A' %>
                                  </span>
                                  <!-- <span class="text-capitalize px-0 py-1">
                                              <i class="la la-map"></i>
                                              <strong>Assigned Date</strong>
                                              <%= course.assignDate ? moment(course.assignDate).utcOffset('+05:30').format('DD MMM YYYY') : 'N/A' %>
                                          </span> -->
                                  <span class="text-capitalize px-0 py-1">
                                    <i class="la la-map"></i>
                                    <strong>Assigned Date</strong>
                                    <%= course.assignDate ? moment(course.assignDate, 'DD MMM YYYY' ).format('DD MMM
                                      YYYY') : 'N/A' %>
                                  </span>
                                  <span class="text-capitalize px-0 py-1">
                                    <a href="<%=process.env.MIPIE_BUCKET_URL +'/' + course.brochure%>" target="_blank">
                                      <i class="la la-download"></i>
                                      <strong><em>Download Brochure</em></strong>
                                    </a>
                                  </span>
                                  <span class="text-capitalize px-0 py-1"><i
                                      class="la la-map-pin"></i><strong>Location</strong>
                                    <% if(course.city) { %>(<%=course.city +', ' + course.state%>)<% } else { %> NA  <% } %>
                                        </span>
                                          </div>
                                          <!-- Other buttons for job-related actions -->
                                          <!-- course applied action button -->
                                          <% if(!isApplied){ %>
                                            <a class="viewjob-apply apply-thisjob apply-div-field  text-left px-0 d-xl-none d-lg-none d-md-none d-sm-block d-block mt-xl-2 mt-lg-2 mt-md-2 mt-sm-1 mt-1 text-center"
                                              href="#" title="" data-toggle="modal" data-target="#apply"
                                              data-value="<%= isApplied %>" data-bs-target="#editUser"
                                              data-bs-toggle="modal" id="apply-div-btn-mob"><i
                                                class="la la-paper-plane ml-3"></i>Register for this Course</a>
                                                <%} else if(course.registrationStatus !== ' Paid' &&
                                        Number(course.registrationCharges)> 0) {%>
                                        <a class="apply-thisjob text-left px-0 py-3 d-xl-block d-lg-block d-md-block d-sm-none d-none"
                                          href="#" onclick="payment('<%= course._id %>')" title=""><i
                                            class="la la-paper-plane ml-3"></i>Complete Registration</a>

                                        <% } else if(course.registrationStatus==='Paid' ||
                                          Number(course.registrationCharges)==0) { %>
                                          <a class="apply-thisjob text-left px-0 py-3 d-xl-block d-lg-block d-md-block d-sm-none d-none disabled-button"
                                            href="#" title=""><i class="la la-paper-plane ml-3"></i>Applied Course</a>
                                          <%}%>



                                </div>
                                <div
                                  class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 mt-xl-0 mt-lg-0 mt-md-0 mt-sm-4 mt-4">
                                  <div class="row">
                                    <div class="col-md-6">
                                      <div class="course_dt mb-4" id="admin_col_data">
                                        <h6>Course Remarks</h6>
                                        <div class="row feature-widget-7-row pt-xl-2 pt-lg-2 pt-md-2 pt-sm-1 pt-1"
                                          id="apply_modal">
                                          <div class="col-xl-12 mb-3 mx-auto">
                                            <div class="course_details_col">
                                              <div class="feature-widget-7 border-bottom">
                                                <div class="feature-widget-7__icon-wrapper my-auto">
                                                  <h5 class="fw-normal"><img
                                                      src="/public_assets/images/jobicons/Eligibility.png"
                                                      class="img-fluid" draggable="false">Eligibility</h5>
                                                </div>
                                                <div class="feature-widget-7__body">
                                                  <p class="feature-widget-7__title mb-0 fw-normal">
                                                    <%=course.qualification%>
                                                  </p>
                                                </div>
                                              </div>
                                              <div class="feature-widget-7 border-bottom">
                                                <div class="feature-widget-7__icon-wrapper my-auto">
                                                  <h5 class="fw-normal"><img
                                                      src="/public_assets/images/jobicons/Age.png" class="img-fluid"
                                                      draggable="false">Age</h5>
                                                </div>
                                                <div class="feature-widget-7__body">

                                                  <p class="feature-widget-7__title mb-0 fw-normal">
                                                    <%=course.age%> Years
                                                  </p>
                                                </div>
                                              </div>
                                              <div class="feature-widget-7 border-bottom">
                                                <div class="feature-widget-7__icon-wrapper my-auto">
                                                  <h5 class="fw-normal"><img
                                                      src="/public_assets/images/jobicons/Experience.png"
                                                      class="img-fluid" draggable="false">Experience</h5>
                                                </div>
                                                <div class="feature-widget-7__body">
                                                  <p class="feature-widget-7__title mb-0 fw-normal">
                                                    <%=course.experience%>
                                                  </p>
                                                </div>
                                              </div>
                                              <div class="feature-widget-7 border-bottom">
                                                <div class="feature-widget-7__icon-wrapper my-auto">
                                                  <h5 class="fw-normal"><img
                                                      src="/public_assets/images/jobicons/Course_mode.png"
                                                      class="img-fluid" draggable="false">Course Mode</h5>
                                                </div>
                                                <div class="feature-widget-7__body">
                                                  <p class="feature-widget-7__title mb-0 fw-normal">
                                                    <%=course.trainingMode%>
                                                  </p>
                                                </div>
                                              </div>
                                              <div class="feature-widget-7 border-bottom">
                                                <div class="feature-widget-7__icon-wrapper my-auto">
                                                  <h5 class="fw-normal"><img
                                                      src="/public_assets/images/jobicons/Course_duration.png"
                                                      class="img-fluid" draggable="false">Course Duration</h5>
                                                </div>
                                                <div class="feature-widget-7__body">
                                                  <p class="feature-widget-7__title mb-0 fw-normal">
                                                    <%=course.duration%>
                                                  </p>
                                                </div>
                                              </div>
                                              <div class="feature-widget-7 border-bottom">
                                                <div class="feature-widget-7__icon-wrapper my-auto">
                                                  <h5 class="fw-normal"><img
                                                      src="/public_assets/images/jobicons/Course_type.png"
                                                      class="img-fluid" draggable="false">Course Type</h5>
                                                </div>
                                                <div class="feature-widget-7__body">
                                                  <p class="feature-widget-7__title mb-0 fw-normal">
                                                    <%=course.courseType==='coursejob' ? 'Course + Job' : 'Course' %>
                                                  </p>
                                                </div>
                                              </div>
                                              <div class="feature-widget-7 border-bottom">
                                                <div class="feature-widget-7__icon-wrapper my-auto">
                                                  <h5 class="fw-normal"><img
                                                      src="/public_assets/images/jobicons/Timing.png" class="img-fluid"
                                                      draggable="false">Timings</h5>
                                                </div>
                                                <div class="feature-widget-7__body">
                                                  <p class="feature-widget-7__title mb-0 fw-normal">
                                                    <%=course.onlineTrainingTiming||course.offlineTrainingTiming%>
                                                  </p>
                                                </div>
                                              </div>
                                              <div class="feature-widget-7 border-bottom">
                                                <div class="feature-widget-7__icon-wrapper my-auto text-end">
                                                  <h5 class="fw-normal"><img
                                                      src="/public_assets/images/jobicons/Institute_name.png"
                                                      class="img-fluid" draggable="false">Institute Name</h5>
                                                </div>
                                                <div class="feature-widget-7__body">
                                                  <p class="feature-widget-7__title mb-0 fw-normal text-truncate">
                                                    <%=course.certifyingAgency%>
                                                  </p>
                                                </div>
                                              </div>
                                              <div class="feature-widget-7 border-bottom">
                                                <div class="feature-widget-7__icon-wrapper my-auto">
                                                  <h5 class="fw-normal"><img
                                                      src="/public_assets/images/jobicons/job_training.png"
                                                      class="img-fluid" draggable="false">On Job Training</h5>
                                                </div>
                                                <div class="feature-widget-7__body">
                                                  <p class="feature-widget-7__title mb-0 fw-normal">
                                                    <%=course.ojt%>
                                                  </p>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                    <div class="col-md-6">
                                      <div class="course_dt mb-4">
                                        <h6>Course Fee Description</h6>
                                        <div class="row feature-widget-7-row pt-xl-2 pt-lg-2 pt-md-2 pt-sm-1 pt-1"
                                          id="apply_modal">
                                          <div class="col-xl-12 mb-3 mx-auto">
                                            <div class="course_details_col">
                                              <div class="feature-widget-7__icon-wrapper my-auto mx-auto text-center">
                                                <h5 class="fw-normal">Registration Fee
                                                  : &#8377;<%=course.registrationCharges%>
                                                </h5>
                                              </div>
                                              <div class="feature-widget-7 border-bottom">
                                                <div class="feature-widget-7__icon-wrapper my-auto">
                                                  <h5 class="fw-normal"><img src="/public_assets/images/tick_icon.svg"
                                                      class="img-fluid" draggable="false">Course Fee</h5>
                                                </div>
                                                <div class="feature-widget-7__body">
                                                  <p class="feature-widget-7__title mb-0 fw-normal">
                                                    <%=course.cutPrice ? course.cutPrice.toLowerCase()==='free' ?
                                                      course.cutPrice : '₹ ' + course.cutPrice : 'N/A' %>
                                                  </p>
                                                </div>
                                              </div>
                                              <div class="feature-widget-7 border-bottom">
                                                <div class="feature-widget-7__icon-wrapper my-auto">
                                                  <h5 class="fw-normal"><img src="/public_assets/images/tick_icon.svg"
                                                      class="img-fluid" draggable="false">Exam Fee</h5>
                                                </div>
                                                <div class="feature-widget-7__body">

                                                  <p class="feature-widget-7__title mb-0 fw-normal">
                                                    &#8377;<%=course.examFee%>
                                                  </p>
                                                </div>
                                              </div>
                                              <div class="feature-widget-7 border-bottom">
                                                <div class="feature-widget-7__icon-wrapper my-auto">
                                                  <h5 class="fw-normal"><img src="/public_assets/images/tick_icon.svg"
                                                      class="img-fluid" draggable="false">Stipend During Training</h5>
                                                </div>
                                                <div class="feature-widget-7__body">
                                                  <p class="feature-widget-7__title mb-0 fw-normal">
                                                    &#8377;<%=course.stipendDuringTraining || 'NA' %>
                                                  </p>
                                                </div>
                                              </div>
                                              <div class="feature-widget-7 border-bottom">
                                                <div class="feature-widget-7__icon-wrapper my-auto">
                                                  <h5 class="fw-normal"><img src="/public_assets/images/tick_icon.svg"
                                                      class="img-fluid" draggable="false">Any Other Charges</h5>
                                                </div>
                                                <div class="feature-widget-7__body">
                                                  <p class="feature-widget-7__title mb-0 fw-normal">
                                                    &#8377;<%=course.otherFee || 'NA' %>
                                                  </p>
                                                </div>
                                              </div>
                                              <div class="feature-widget-7 border-bottom">
                                                <div class="feature-widget-7__icon-wrapper my-auto">
                                                  <h5 class="fw-normal"><img src="/public_assets/images/tick_icon.svg"
                                                      class="img-fluid" draggable="false">Installment Option</h5>
                                                </div>
                                                <div class="feature-widget-7__body">
                                                  <p class="feature-widget-7__title mb-0 fw-normal">
                                                    <%=course.emiOptionAvailable%>
                                                  </p>
                                                </div>
                                              </div>
                                              <div class="feature-widget-7 border-bottom">
                                                <div class="feature-widget-7__icon-wrapper my-auto">
                                                  <h5 class="fw-normal"><img src="/public_assets/images/tick_icon.svg"
                                                      class="img-fluid" draggable="false">Max. EMI Tenure</h5>
                                                </div>
                                                <div class="feature-widget-7__body">
                                                  <p class="feature-widget-7__title mb-0 fw-normal">
                                                    <%=course.maxEMITenure || 'NA' %>
                                                  </p>
                                                </div>
                                              </div>
                                              <div class="feature-widget-7 border-bottom">
                                                <div class="feature-widget-7__icon-wrapper my-auto">
                                                  <h5 class="fw-normal"><img src="/public_assets/images/tick_icon.svg"
                                                      class="img-fluid" draggable="false">Bank Loan Option</h5>
                                                </div>
                                                <div class="feature-widget-7__body">
                                                  <p class="feature-widget-7__title mb-0 fw-normal">
                                                    <%=course.loan==='Yes'? 'Yes' :'No'%>
                                                  </p>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                    <div class="col-md-12">
                                      <div class="course_dt mb-4" id="candi_login-faq">
                                        <h6>FAQ's</h6>
                                        <div class="">
                                          <div class="single-footer">
                                            <ul class="contact-info color-pink mb-2">
                                              <% course.questionAnswers.forEach((ele)=>{%>
                                                <li id="que" class="mb-1"><img
                                                    src="/public_assets/images/ul_li_shape.svg" draggable="false"> <%-
                                                    ele.Question%></li>
                                                <li id="que "><%- ele.Answer%></li>
                                                <%})%>
                                            </ul>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                      </div>
                      <input type="hidden" id="apply-field" value="true">
                      <input type="hidden" id="has-applied" value="false">
                      <input type="hidden" id="for-mobile" value="false">
                    </div>
                  </div>


                </div>
            </section>

            <!-- Modals -->
            <div class="modal fade" id="apply" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
              aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered" role="document">
                <% if(canApply===true) { %>
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title text-white text-uppercase" id="exampleModalLongTitle">REGISTRATION</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>

                    <div class="modal-body pt-1" id="popup-body">
                      <h5 class="pb-1 mb-0">
                        Register for this Course
                      </h5>
                    </div>
                    <div class="modal-footer">
                      <button type="submit" class="btn btn-primary" id="apply-btn"
                        onclick="applyCourse('<%= course._id %>')">Proceed</button>

                    </div>
                  </div>
                  <% } else { %>
                    <% include ./partials/coursecompleteprofile %>
                      <% } %>
              </div>
            </div>


            <!-- <div class="modal fade" id="apply" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title text-white text-uppercase" id="exampleModalLongTitle">REGISTRATION</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body pt-1" id="popup-body">
                            <h5 class="pb-1 mb-0">
                              Register for this Course
                            </h5>
                        </div>
                        <div class="modal-footer">
                            <button type="submit" class="btn btn-primary" id="apply-btn" onclick="applyCourse('<%= course._id %>')">Proceed</button>
                           
                        </div>
                    </div>
            </div>
        </div> -->
            <!-- end apply job Modal -->

            <div class="modal fade" id="completeRegistration" tabindex="-1" role="dialog"
              aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title text-white text-uppercase" id="exampleModalLongTitle">REGISTRATION DONE</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body pt-1" id="popup-body">
                    <h5 class="pb-1 mb-0">
                      Congratulations!
                    </h5>
                    <span>You have successfully registered for this course.<br /> Our team will contact you
                      shortly.</span>
                  </div>
                  <div class="modal-footer">
                    <button type="submit" class="btn btn-primary" id="close" onclick="requiredDocs()">close</button>

                  </div>
                </div>
              </div>
            </div>
            <!-- end apply job Modal -->
            <!-- Modal -->
            <!-- Modal -->

            <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
              aria-labelledby="staticBackdropLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content model-content-height p-0">

                  <div class="modal-body p-0">
                    <div class="uploader-container">
                      <div class="uploader-header">Document Uploader</div>

                      <div id="documentContainer">
                        <div class="doc-row">

                          <div class="file-container d-flex align-items-center gap-4">
                            <label class="field-label">Select File:</label>
                            <label class="file-input-label">
                              Choose File
                              <input type="file" id="docPopUp" class="file-input fileInput"
                                accept=".pdf,.doc,.docx,.jpg,.jpeg,.png" onchange="validateFile(this)">
                            </label>
                            <div id="image-preview" style="display: flex; flex-wrap: wrap; gap: 10px;"></div>
                            <div class="add-doc-container">
                              <button class="upload-btn" onclick="uploadFile(this)">Upload</button>
                            </div>
                          </div>


                        </div>
                      </div>




                    </div>

                  </div>

                </div>
              </div>
            </div>



            <div class="modal fade" id="videoModal" tabindex="-1" role="dialog" aria-labelledby="videoModalTitle"
              aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                  <div class="modal-body p-0 text-center embed-responsive embed-responsive-4by3">
                    <video id="courseVid" controls autoplay class="video-fluid text-center">
                      <source id="vodeoElement" src="" type="video/mp4" class="img-fluid video-fluid">
                      Your browser does not support the video tag.
                    </video>
                  </div>
                </div>
              </div>
            </div>

            <!-- <script type="text/javascript"
    src="https://platform-api.sharethis.com/js/sharethis.js#property=63d922685a2f67001342bdf8&product=inline-share-buttons&source=platform"
    async="async"></script> -->

            <!-- Complete Profile Modal End-->


            <script src="https://checkout.razorpay.com/v1/checkout.js"></script>


            <!-- Your existing login page HTML -->
            <%- storageScript %>

              <style>
                .model-content-height {
                  max-height: 100% !important;
                  max-width: 100% !important;
                  width: 100% !important;
                }

                .uploader-container {
                  /* width: 900px; */
                  background-color: #ffffff;
                  border-radius: 12px;
                  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
                  overflow: hidden;
                }

                .uploader-header {
                  background: linear-gradient(135deg, #3498db, #2c3e50);
                  color: white;
                  padding: 20px;
                  text-align: center;
                  font-size: 24px;
                  font-weight: 600;
                }

                /* Document row styling */
                .doc-row {
                  display: flex;
                  flex-wrap: wrap;
                  gap: 15px;
                  padding: 25px;
                  border-bottom: 1px solid #eaeaea;
                  background-color: #f8f9fa;
                  transition: all 0.3s ease;
                }

                .doc-row:hover {
                  background-color: #f0f7ff;
                  transform: translateY(-2px);
                }

                /* Uploaded/disabled row styling */
                .doc-row.uploaded {
                  background-color: #f0f0f0;
                  opacity: 0.7;
                  pointer-events: none;
                }

                /* Form field styling */
                .field-container {
                  flex: 1 1 250px;
                }

                .field-label {
                  display: block;
                  margin-bottom: 8px;
                  color: #2c3e50;
                  font-weight: 600;
                  font-size: 14px;
                }

                .doc-input {
                  width: 100%;
                  padding: 12px 15px;
                  border: 2px solid #e0e0e0;
                  border-radius: 6px;
                  font-size: 14px;
                  transition: all 0.3s;
                }

                .doc-input:focus {
                  border-color: #3498db;
                  box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
                  outline: none;
                }

                /* File input styling */
                .file-container {
                  flex: 1 1 250px;
                  position: relative;
                  gap: 20px;
                }

                .file-input-label {
                  display: block;
                  position: relative;
                  width: 100%;
                  height: 45px;
                  background-color: #f0f0f0;
                  border: 2px solid #e0e0e0;
                  border-radius: 6px;
                  text-align: center;
                  line-height: 45px;
                  cursor: pointer;
                  overflow: hidden;
                  color: #555;
                  font-weight: 500;
                  transition: all 0.3s;
                  margin: 0px !important;
                }

                .file-input-label:hover {
                  background-color: #e8e8e8;
                  border-color: #d0d0d0;
                }

                .file-input-label:active {
                  transform: scale(0.98);
                }

                .file-input {
                  position: absolute;
                  top: 0;
                  left: 0;
                  width: 100%;
                  height: 100%;
                  opacity: 0;
                  cursor: pointer;
                }

                .file-name-display {
                  margin-top: 8px;
                  font-size: 13px;
                  color: #666;
                  text-overflow: ellipsis;
                  overflow: hidden;
                  white-space: nowrap;
                }

                /* Button styling */
                .upload-btn {
                  flex: 0 0 120px;
                  background-color: #3498db;
                  color: white;
                  border: none;
                  border-radius: 6px;
                  padding: 12px 15px;
                  font-size: 14px;
                  font-weight: 600;
                  cursor: pointer;
                  transition: all 0.3s;
                  box-shadow: 0 3px 10px rgba(52, 152, 219, 0.2);
                }

                .upload-btn:hover {
                  background-color: #2980b9;
                  transform: translateY(-2px);
                  box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
                }

                .upload-btn:active {
                  transform: translateY(0);
                }

                /* Add document button styling */
                .add-doc-container {
                  padding: 15px;
                  text-align: center;
                  background-color: #f8f9fa;
                }

                .add-doc-btn {
                  background-color: #2ecc71;
                  color: white;
                  border: none;
                  border-radius: 6px;
                  padding: 12px 20px;
                  font-size: 14px;
                  font-weight: 600;
                  cursor: pointer;
                  transition: all 0.3s;
                  box-shadow: 0 3px 10px rgba(46, 204, 113, 0.2);
                  display: inline-flex;
                  align-items: center;
                }

                .add-doc-btn:hover {
                  background-color: #27ae60;
                  transform: translateY(-2px);
                  box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3);
                }

                .add-doc-btn:active {
                  transform: translateY(0);
                }

                .add-doc-btn::before {
                  content: "+";
                  margin-right: 8px;
                  font-size: 18px;
                  font-weight: bold;
                }

                /* Files list styling */
                .files-section {
                  padding: 20px 25px;
                }

                .files-heading {
                  color: #2c3e50;
                  font-size: 18px;
                  margin-bottom: 15px;
                  padding-bottom: 10px;
                  border-bottom: 2px solid #e0e0e0;
                }

                .files-list {
                  list-style-type: none;
                  padding: 0;
                  margin: 0;
                }

                .file-item {
                  background-color: #f0f7ff;
                  padding: 15px;
                  margin-bottom: 10px;
                  border-radius: 8px;
                  border-left: 4px solid #3498db;
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  transition: all 0.3s;
                }

                .file-item:hover {
                  background-color: #e6f2ff;
                  transform: translateX(3px);
                }

                .file-info {
                  display: flex;
                  align-items: center;
                }

                .file-icon {
                  margin-right: 15px;
                  font-size: 20px;
                  color: #3498db;
                }

                .file-name {
                  font-weight: 500;
                }

                .file-action-btns {
                  display: flex;
                  gap: 10px;
                }

                .view-btn,
                .delete-btn {
                  background: transparent;
                  border: none;
                  cursor: pointer;
                  font-size: 16px;
                  color: #7f8c8d;
                  transition: all 0.3s;
                  padding: 5px;
                }

                .view-btn:hover {
                  color: #3498db;
                }

                .delete-btn:hover {
                  color: #e74c3c;
                }

                /* Empty state styling */
                .empty-state {
                  padding: 40px 20px;
                  text-align: center;
                  color: #95a5a6;
                }

                .empty-state-icon {
                  font-size: 40px;
                  margin-bottom: 15px;
                }

                .empty-state-text {
                  font-size: 16px;
                }

                /* Modal styling */
                .modal-backdrop {
                  position: fixed;
                  top: 0;
                  left: 0;
                  width: 100%;
                  height: 100%;
                  background-color: rgba(0, 0, 0, 0.5);
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  z-index: 1000;
                  opacity: 0;
                  visibility: hidden;
                  transition: all 0.3s;
                }

                .modal-backdrop.active {
                  opacity: 1;
                  visibility: visible;
                }

                .modal-content {
                  background-color: white;
                  border-radius: 10px;
                  box-shadow: 0 5px 25px rgba(0, 0, 0, 0.2);
                  width: 80%;
                  max-width: 800px;
                  max-height: 80vh;
                  overflow: auto;
                  padding: 25px;
                  transform: translateY(-20px);
                  transition: all 0.3s;
                }

                .modal-backdrop.active .modal-content {
                  transform: translateY(0);
                }

                .modal-header {
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  margin-bottom: 15px;
                  padding-bottom: 15px;
                  border-bottom: 1px solid #eaeaea;
                }

                .modal-title {
                  font-size: 20px;
                  font-weight: 600;
                  color: #2c3e50;
                }

                .modal-close {
                  background: none;
                  border: none;
                  font-size: 24px;
                  cursor: pointer;
                  color: #7f8c8d;
                  transition: color 0.3s;
                }

                .modal-close:hover {
                  color: #e74c3c;
                }

                .file-preview {
                  text-align: center;
                  min-height: 200px;
                  display: flex;
                  flex-direction: column;
                  align-items: center;
                  justify-content: center;
                }

                .file-preview-icon {
                  font-size: 64px;
                  color: #3498db;
                  margin-bottom: 20px;
                }

                .file-preview-name {
                  font-size: 18px;
                  font-weight: 500;
                  margin-bottom: 10px;
                }

                .file-preview-size {
                  font-size: 14px;
                  color: #7f8c8d;
                  margin-bottom: 20px;
                }

                .file-preview-actions {
                  margin-top: 20px;
                }

                .preview-btn {
                  background-color: #3498db;
                  color: white;
                  border: none;
                  border-radius: 6px;
                  padding: 10px 20px;
                  font-size: 14px;
                  font-weight: 500;
                  cursor: pointer;
                  transition: all 0.3s;
                }

                .preview-btn:hover {
                  background-color: #2980b9;
                }

                /* Responsive styling */
                @media (max-width: 768px) {
                  .doc-row {
                    flex-direction: column;
                  }

                  .upload-btn {
                    width: 100%;
                    flex: none;
                  }
                }

                /* Animation effects */
                @keyframes fadeIn {
                  from {
                    opacity: 0;
                    transform: translateY(10px);
                  }

                  to {
                    opacity: 1;
                    transform: translateY(0);
                  }
                }

                .file-item {
                  animation: fadeIn 0.3s ease-out;
                }
              </style>

              <script>
                function removeFile(btn) {
                  let previewContainer = btn.closest(".preview-container");
                  let fileInput = previewContainer.previousElementSibling;
                  fileInput.value = ""; // Clear the input
                  previewContainer.classList.add("d-none"); // Hide preview
                }
                function validateFile(input) {
                  const allowedExtensions = ["pdf", "doc", "docx", "jpg", "jpeg", "png"];
                  const fileName = input.value;
                  const fileExtension = fileName.split('.').pop().toLowerCase();

                  if (!allowedExtensions.includes(fileExtension)) {
                    alert("Sirf PDF, DOC, DOCX, JPG, JPEG, aur PNG files upload karein!");
                    input.value = ""; // Galat file select hone par input box clear ho jayega
                  }


                  let previewContainer = $("#image-preview");
                  previewContainer.html(""); // ✅ Purane previews hatao

                  if (input.files && input.files.length > 0) {
                    selectedFiles = Array.from(input.files); // ✅ Files ko store karo

                    selectedFiles.forEach((file, index) => {
                      if (file.type.startsWith("image/") || file.type.startsWith("video/")) { // ✅ Sirf images/videos ka preview dikhaye
                        let reader = new FileReader();
                        reader.onload = function (e) {
                          let mediaElement = file.type.startsWith("image/")
                            ? `<img src="${e.target.result}" style="width: 50px; height: 50px; border-radius: 8px; object-fit: cover; border: 1px solid #ccc;">`
                            : `<video src="${e.target.result}" style="width: 100px; height: 100px; border-radius: 8px; object-fit: cover; border: 1px solid #ccc;" controls></video>`;

                          let previewItem = `
                        <div style="position: relative; display: inline-block;" data-index="${index}">
                            ${mediaElement}
                            <span  class="remove-btn" 
                                style="position: absolute; top: -5px; right: -5px; background: white; color: white; border-radius: 50%; padding: 3px 6px; cursor: pointer;">
                                ❌
                            </span>
                        </div>`;
                          previewContainer.append(previewItem);
                        };
                        reader.readAsDataURL(file);
                      }
                    });
                  }
                }
                function showpopup() {
                  $('#staticBackdrop').modal('show');
                }
                // Store file data for preview
                const uploadedFiles = [];

                function updateFileName(input) {
                  const fileName = input.files.length > 0 ? input.files[0].name : "No file chosen";
                  input.parentElement.nextElementSibling.textContent = fileName;
                }

                function addNewDocumentField() {
                  let docContainer = document.getElementById("documentContainer");
                  let newRow = document.createElement("div");
                  newRow.classList.add("doc-row");
                  newRow.innerHTML = `
          
          
          <div class="file-container">
              <label class="field-label">Select File:</label>
              <label class="file-input-label">
                  Choose File
                  <input type="file" class="file-input fileInput" onchange="updateFileName(this)">
              </label>
              <div class="file-name-display">No file chosen</div>
          </div>
          
          <button class="upload-btn" onclick="uploadFile(this)">Upload</button>
      `;
                  docContainer.appendChild(newRow);
                }

                function uploadFile(button) {
                  let parentRow = button.parentElement;
                  let docName = parentRow.querySelector(".docName").value;
                  let fileInput = parentRow.querySelector(".fileInput");
                  let file = fileInput.files[0];

                  if (docName.trim() === "") {
                    alert("Please enter the document name.");
                    return;
                  }

                  if (!file) {
                    alert("Please select a file to upload.");
                    return;
                  }

                  // Add file to our records for preview
                  const fileId = 'file_' + Date.now();
                  uploadedFiles.push({
                    id: fileId,
                    name: docName,
                    file: file,
                    filename: file.name,
                    size: file.size,
                    type: file.type
                  });

                  // Hide empty state if visible
                  const emptyState = document.getElementById("emptyState");
                  if (emptyState) {
                    emptyState.style.display = "none";
                  }

                  let fileList = document.getElementById("fileList");
                  let listItem = document.createElement("li");
                  listItem.classList.add("file-item");
                  listItem.setAttribute("data-file-id", fileId);
                  listItem.innerHTML = `
          <div class="file-info">
              <span class="file-icon">📄</span>
              <span class="file-name">${docName} - ${file.name}</span>
          </div>
          <div class="file-action-btns">
              <button class="view-btn" title="View file" onclick="viewFile('${fileId}')">👁️</button>
              <button class="delete-btn" title="Delete file" onclick="deleteFile(this)">🗑️</button>
          </div>
      `;
                  fileList.appendChild(listItem);

                  // Disable this row to prevent re-uploading
                  parentRow.classList.add("uploaded");
                }

                function deleteFile(button) {
                  const listItem = button.closest(".file-item");
                  const fileId = listItem.getAttribute("data-file-id");

                  // Remove from our records
                  const fileIndex = uploadedFiles.findIndex(file => file.id === fileId);
                  if (fileIndex !== -1) {
                    uploadedFiles.splice(fileIndex, 1);
                  }

                  // Animate and remove
                  listItem.style.transform = "translateX(100px)";
                  listItem.style.opacity = "0";
                  setTimeout(() => {
                    listItem.remove();

                    // Show empty state if no more files
                    const fileList = document.getElementById("fileList");
                    if (fileList.querySelectorAll(".file-item").length === 0) {
                      const emptyState = document.getElementById("emptyState");
                      if (emptyState) {
                        emptyState.style.display = "block";
                      }
                    }
                  }, 300);
                }

                function viewFile(fileId) {
                  const fileData = uploadedFiles.find(file => file.id === fileId);
                  if (!fileData) return;

                  const filePreview = document.getElementById("filePreview");

                  // Format file size
                  let fileSize = '';
                  if (fileData.size < 1024) {
                    fileSize = fileData.size + ' bytes';
                  } else if (fileData.size < 1024 * 1024) {
                    fileSize = (fileData.size / 1024).toFixed(2) + ' KB';
                  } else {
                    fileSize = (fileData.size / (1024 * 1024)).toFixed(2) + ' MB';
                  }

                  // Choose icon based on file type
                  let fileIcon = '📄';
                  if (fileData.type.startsWith('image/')) {
                    fileIcon = '🖼️';
                  } else if (fileData.type.includes('pdf')) {
                    fileIcon = '📑';
                  } else if (fileData.type.includes('word') || fileData.filename.endsWith('.doc') || fileData.filename.endsWith('.docx')) {
                    fileIcon = '📝';
                  } else if (fileData.type.includes('excel') || fileData.filename.endsWith('.xls') || fileData.filename.endsWith('.xlsx')) {
                    fileIcon = '📊';
                  }

                  // Create preview content
                  filePreview.innerHTML = `
          <div class="file-preview-icon">${fileIcon}</div>
          <div class="file-preview-name">${fileData.name}</div>
          <div class="file-preview-info">${fileData.filename}</div>
          <div class="file-preview-size">${fileSize}</div>
          <div class="file-preview-type">${fileData.type || 'Unknown type'}</div>
          <div class="file-preview-actions">
              <button class="preview-btn">Download</button>
          </div>
      `;

                  // If it's an image, show a preview
                  if (fileData.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function (e) {
                      const imgPreview = document.createElement('img');
                      imgPreview.src = e.target.result;
                      imgPreview.style.maxWidth = '100%';
                      imgPreview.style.maxHeight = '300px';
                      imgPreview.style.marginTop = '20px';
                      imgPreview.style.marginBottom = '20px';
                      imgPreview.style.borderRadius = '8px';
                      imgPreview.style.boxShadow = '0 2px 10px rgba(0,0,0,0.1)';

                      // Insert after the file icon
                      const fileIcon = filePreview.querySelector('.file-preview-icon');
                      fileIcon.parentNode.insertBefore(imgPreview, fileIcon.nextSibling);
                    }
                    reader.readAsDataURL(fileData.file);
                  }

                  // Open modal
                  const modal = document.getElementById('fileModal');
                  modal.classList.add('active');
                }

                function closeModal() {
                  const modal = document.getElementById('fileModal');
                  modal.classList.remove('active');
                }

                // Close modal when clicking outside content
                document.getElementById('fileModal').addEventListener('click', function (e) {
                  if (e.target === this) {
                    closeModal();
                  }
                });
              </script>



              <script>
                function requiredDocs() {
                  // Form submit hone se rokne ke liye

                  $('#completeRegistration').addClass('d-none')
                  console.log("Model Opening");

                  // $('#completeRegistration').modal('hide'); 
                  $('#staticBackdrop').modal('show');
                }

                function applyCourse(id) {
                  $('#apply-btn').addClass('disabled');
                  document.getElementById('apply-btn').setAttribute('disabled', true);

                  // Get stored entry URL from localStorage
                  const entryUrlData = localStorage.getItem('entryUrl');


                  // Prepare data to send
                  const data = {
                    entryUrl: entryUrlData ? entryUrlData : null,

                  };
                  console.log(data);


                  axios({
                    method: 'post',
                    url: `/candidate/course/${id}/apply`,
                    data: data,
                    headers: {
                      'x-auth': localStorage.getItem('token')
                    }
                  })
                    .then(result => {
                      $('#apply-btn').removeClass('disabled');
                      document.getElementById('apply-btn').setAttribute('disabled', false)
                      if ($('#apply-field').val() == 'false') {
                        $('#apply').modal('hide');
                        if ($('#for-mobile').val() == 'true') {
                          $('#apply-div-btn-mob').html(`<i class="la la-paper-plane ml-3"></i>Applied Course`)
                          $('#apply-div-btn-mob').addClass('disabled-button')
                          $('#has-applied').val('true');
                          window.location.href = "tel://" + '<%=mobileNumber%>'
                        } else {
                          $('#apply-div-btn').html(`<i class="la la-paper-plane ml-3"></i>Applied Course`)
                          $('#apply-div-btn').addClass('disabled-button')
                          $('.call-div-field').removeAttr('data-toggle')
                          $('.call-div-field').removeAttr('data-target')
                          $('.call-div-field').attr('href', "tel://" + '<%=mobileNumber%>')
                          window.location.href = "tel://" + '<%=mobileNumber%>'
                        }
                      } else {
                        $('#apply').modal('hide');
                        // Execute payment Popup==========================
                        let registrationCharges = '<%=Number(course.registrationCharges)||0%>'
                        if (registrationCharges > 0) {
                          payment(id)
                        } else {
                          $('#completeRegistration').modal('show');
                        }
                        // window.location.reload()
                        // $('#afterApply').modal('show');
                      }
                    }).catch(err => {
                      console.log(err.message)
                      window.location.reload()
                    })
                }


                function payment(courseId) {
                  let amount = 1
                  let data = {
                    courseId,
                    amount
                  }
                  axios({ method: 'post', url: '/candidate/coursepayment', data, headers: { 'x-auth': localStorage.getItem('token') } }).then((res) => {
                    let options = {
                      "key": '<%= process.env.MIPIE_RAZORPAY_KEY %>',
                      "amount": res.data.order.amount,
                      "currency": res.data.order.currency,
                      "name": "Focalyt",
                      "description": "",
                      "image": "/images/logo/logo.png",
                      "order_id": res.data.order.id,
                      "handler": function (response) {
                        let data = {
                          paymentId: response.razorpay_payment_id,
                          orderId: response.razorpay_order_id,
                          _candidate: res.data.candidate._id,
                          courseId,
                          amount
                        }
                        axios({
                          method: 'post',
                          url: '/candidate/coursepaymentStatus',
                          data,
                          headers: {
                            'x-auth': localStorage.getItem('token')
                          }
                        }).then(res => {
                          $('#completeRegistration').modal('show');

                        }).catch(
                          (error) => {
                            console.log(error.message)
                          })
                      },
                      "prefill": {
                        "name": res.data.candidate.name,
                        "email": res.data.candidate.email,
                        "contact": res.data.candidate.mobile
                      },
                      "theme": {
                        "color": "#FC2B5A"
                      }
                    };
                    let rzp1 = new Razorpay(options);
                    rzp1.open();
                  }).catch(
                    err => console.log(err.message)
                  )
                }



                function setValues(offerId, amount) {
                  let offer = document.getElementById('offerId')
                  let voucherAmount = document.getElementById('amount')
                  let offerAmount = document.getElementById('offerAmount')
                  offer.value = offerId;
                  voucherAmount.value = amount
                  offerAmount.value = amount
                  document.getElementById('applyButton').innerHTML = `Pay / भुगतान करें ₹ ${amount}`
                }

                const validateActions = () => {
                  const isApplied = '<%=isApplied%>'
                  if (isApplied == 'false' && $('#has-applied').val() == 'false') {
                    $('#apply-field').val('false')
                    $('#apply').modal('show')
                    $('#for-mobile').val('true')
                  } else {
                    window.location.href = "tel://" + '<%=mobileNumber%>'
                  }
                }

                function convert(event) {
                  const val = event.target.value;
                  event.target.value = val.toUpperCase()

                  let applyButton = document.getElementById('add')
                  if (event.target.value.trim() !== '') {
                    applyButton.disabled = false
                    applyButton.classList.remove('disabled')
                  } else {
                    applyButton.disabled = true
                    applyButton.classList.add('disabled')
                  }
                }

                function checkVouchers(e) {
                  if (e.key === "Enter") {
                    e.preventDefault()
                    $('#apply').click()
                  }
                }

              </script>
              <!-- slider gallery -->

              <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
                integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
                crossorigin="anonymous">
                </script>
              <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
                integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
                crossorigin="anonymous">
                </script>
              <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
              <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> -->
              <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.2.0/js/swiper.min.js"></script>
              <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js"></script>



              <script>


                const shareData = {
                  title: 'MDN',
                  text: 'Learn web development on MDN!',
                  url: 'https://developer.mozilla.org'
                }

                const btn = document.querySelector('button');
                const resultPara = document.querySelector('.result');
              </script>
              <script>
                $(function () {

                  var swiper = new Swiper('.carousel-gallery .swiper-container', {
                    effect: 'slide',
                    speed: 900,
                    slidesPerView: 3,
                    spaceBetween: 5,
                    simulateTouch: true,
                    autoplay: {
                      delay: 5000,
                      stopOnLastSlide: false,
                      disableOnInteraction: false
                    },
                    pagination: {
                      el: '.carousel-gallery .swiper-pagination',
                      clickable: true
                    },
                    breakpoints: {
                      // when window width is <= 320px
                      320: {
                        slidesPerView: 1,
                        spaceBetween: 2
                      },
                      // when window width is <= 480px
                      425: {
                        slidesPerView: 2,
                        spaceBetween: 2
                      },
                      // when window width is <= 640px
                      768: {
                        slidesPerView: 2,
                        spaceBetween: 2
                      }
                    }
                  });



                });
              </script>





              <% include ./partials/footer%>

                <script>
                  $(document).on('show.bs.modal', "#videoModal", function (event) {
                    const button = event.relatedTarget
                    // Extract info from data-bs-* attributes
                    const link = button.getAttribute('link')

                    // Update the modal's content.
                    const modalBody = videoModal.querySelector('.modal-body #vodeoElement')

                    modalBody.src = link
                    document.getElementById('courseVid').load()
                  });


                  $(document).on('hide.bs.modal', "#videoModal", function (event) {
                    document.getElementById('courseVid').pause()
                  })

                  $(document).on('hide.bs.modal', "#completeRegistration", function (event) {
                    window.location.reload()
                  })
                </script>